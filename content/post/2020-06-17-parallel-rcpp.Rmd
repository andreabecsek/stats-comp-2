---
title: Parallel Rcpp
author: ''
date: '2020-06-17'
slug: parallel-rcpp
categories: []
tags: []
---

## Rcpp Parallel
```{r}
library(Rcpp)
```


Consider a simple scenario. We want to flip $100$ coins and get an estimate of the mean.
We can do this in R
```{r}
mean(rbinom(100, 1, 0.5))
```

We can do this using
```{Rcpp eval=FALSE}
#include <iostream>
#include <Rcpp.h>
using namespace Rcpp;

int flip_coin(){
  int n = rand() % 2;
  return n;
}

//[[Rcpp::export(mean_flips)]]
NumericVector coin()
{
  NumericVector out(100);
  for(i=0; i<100; i++)
  {
    out[i] = flip_coin
  }
  return out;
}
```

```{r}
sourceCpp("../code/coin_rcpp.cpp")
```
```{r}
mean_flips()
```

